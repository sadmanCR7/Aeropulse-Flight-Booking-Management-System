{% extends 'base.html' %}
{% load static %}
{% block title %}Register - Step 3{% endblock %}

{% block extra_css %}
<style>
    body { background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('{% static 'images/reg_bg.jpg' %}'); background-size: cover; background-position: center; background-attachment: fixed; }
    nav.navbar.bg-dark, footer.bg-dark { background: transparent !important; }
    .reg-card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(8px); border-radius: 15px; box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3); padding: 2.5rem; }
    .progress-bar-container { display: flex; justify-content: space-between; margin-bottom: 2rem; }
    .progress-step { text-align: center; flex-grow: 1; }
    .progress-step .step-circle { width: 30px; height: 30px; border-radius: 50%; background-color: #e9ecef; color: #adb5bd; display: inline-flex; justify-content: center; align-items: center; font-weight: bold; border: 2px solid #ced4da; transition: all 0.3s ease; }
    .progress-step .step-label { margin-top: 0.5rem; font-size: 0.8rem; color: #6c757d; transition: all 0.3s ease; }
    .progress-step.active .step-circle { background-color: #0d6efd; color: white; border-color: #0d6efd; }
    .progress-step.active .step-label { color: #212529; font-weight: bold; }
</style>
{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8" data-aos="fade-up">
            <div class="reg-card">
                <!-- Progress Bar -->
                <div class="progress-bar-container">
                    <div class="progress-step active"><div class="step-circle">1</div><div class="step-label">Personal</div></div>
                    <div class="progress-step active"><div class="step-circle">2</div><div class="step-label">Contact</div></div>
                    <div class="progress-step active"><div class="step-circle">3</div><div class="step-label">Account</div></div>
                    <div class="progress-step"><div class="step-circle">4</div><div class="step-label">Photo</div></div>
                </div>

                <h2 class="text-center fw-bold mb-1">Account Credentials</h2>
                <form method="post">
                    {% csrf_token %}
                    <div class="mb-3"><label class="form-label">Username</label>{{ form.username }}</div>
                    <div class="mb-3"><label class="form-label">Password</label><div class="position-relative">{{ form.password }}<i class="fas fa-eye-slash" id="togglePassword1" style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #6c757d;"></i></div></div>
                    <div class="mb-3"><label class="form-label">Confirm Password</label><div class="position-relative">{{ form.password2 }}<i class="fas fa-eye-slash" id="togglePassword2" style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #6c757d;"></i></div></div>
                    <button type="submit" class="btn btn-primary w-100 mt-3 py-2 fw-bold">Next: Profile Photo</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block extra_js %}
<script>
    function setupPasswordToggle(toggleId, passwordId) {
        const toggle = document.getElementById(toggleId), password = document.getElementById(passwordId);
        if (toggle && password) toggle.addEventListener('click', function() {
            const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
            password.setAttribute('type', type);
            this.classList.toggle('fa-eye'); this.classList.toggle('fa-eye-slash');
        });
    }
    setupPasswordToggle('togglePassword1', 'id_password');
    setupPasswordToggle('togglePassword2', 'id_password2');
</script>
{% endblock %}